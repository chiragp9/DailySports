@model DailySports.ServiceLayer.Dtos.TounamentListDto
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="main-tour-img bg-image" style="background-image:url('@Globals.CDNContent("website-tournament-banner.png")')">
    @foreach (var latest in Model.LatestTournament)
    {
        if (latest.Title != null && latest.Title.Length > 0)
        {
        <div class="main-tour-sec">
            <div class="container">
                <div class="col-sm-6 pad-left-zero">
                    <div class="tournament_iframe">
                        <div style="width:560px; height:345px">
                            <iframe width="100%" height="100%" src="@latest.URL" frameborder="0" allowfullscreen=""></iframe>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 pad-right-zero">
                    <div class="upper_tournament_add bg-image" style="background-image:url('@latest.TournamentImage')">
                        <div class="upper_tournament_add_layer">
                            @{
                                var prizePool = "0";
                                if (latest.PrizePool != null)
                                {
                                    prizePool = latest.PrizePool.Amount;
                                }
                            }
                            <h3>@latest.Title <span class="grey">@latest.StartDate.ToString("D")</span> - <span class="grey">@latest.EndDate.ToString("D")</span>                            <span class="pull-right green">$@prizePool+</span></h3>
                            <p>@Html.Raw(latest.Overview))</p>
                            <a href="@Url.Action(" GetTournament ", new { @id = latest.Id,title=latest.Title.Replace(" ", "_ ").Replace("'", "") })" class="pull-right grey">Read more</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        }
    }
</div>
<div class="container bg-inherit">
    <div class="home_content">
        <div class="content_bg_img"></div>
            <div class="h_content">
                <div class="basic_content">
                    <div class="post_page_header tour_small_header height_40 bg_light_black">
                        <div class="col-sm-4 h_100_per pad-zero tour_search_header">
                            <ul class="filters">
                                <li data-filter=".tour"><a href="javascript:void(0)"><i class="fa fa-align-justify"></i>TOURNAMENTS</a></li>
                                <li data-filter=".stream"><a href=""><i class="fa fa-align-justify"></i>STREAMS</a></li>
                            </ul>
                        </div>
                        <div class="col-sm-5">
                            <div class="filter2">
                                <h4>Filter:</h4>
                                <ul id="game-filter" class="filters_one">
                                    @foreach (var game in Model.AllGames)
                                    {
                                        <li><a href="#" data-filter="@game.Id"><img src="@Globals.CDNContent(game.GameImage)" /></a></li>
                                    }
                                </ul>
                            </div>
                        </div>
                        <div class="col-sm-3 pad-zero">
                            <div class="sb_search">
                                <i class="fa fa-search"></i>
                                <input id="tournament-search" type="text" class="form-control" placeholder="Search...">
                            </div>
                        </div>
                    </div>
                    <div class="tournament_details">
                        <div class="isotope">
                            @foreach (var Tournament in Model.AllTournaments)
                            {
                                if (Tournament.Title != null && Tournament.Title.Length > 0)
                                {
                                    <div class="tour_filter_layout element-item dota bf3 tour" data-filter="@Tournament.GameId">
                                        
                                            <div class="tour_filter_box br-bottom">
                                                <div class="col-sm-3 pad-zero">
                                                    <div class="tour_filter_box_image">
                                                        <a href="@Url.Action("GetTournament",new { @id=Tournament.Id,title = Tournament.Title.Replace(" ", "_").Replace("' ", " ") })">
                                                            <img src="@Globals.CDNContent(Tournament.TournamentImage)" alt="@Tournament.Title">
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="col-sm-9">
                                                    <div class="tour_filter_box_content float_left">
                                                        <div class="tour_filter_upper float_left">
                                                            <h3 class="pull-left">
                                                                <a href="@Url.Action("GetTournament",new { @id=Tournament.Id,title = Tournament.Title.Replace(" ", "_").Replace("' ", " ") })">
                                                                    <img src="@Globals.CDNContent(Tournament.Game.GameImage)" alt="@Tournament.Game.Name">@Tournament.Title
                                                                    <span>@Tournament.StartDate.ToString("D")</span> - <span>@Tournament.EndDate.ToString("D")</span>
                                                                 </a>
                                                            </h3>
                                                            @{
                                                                var prizePool = ""; 
                                                                if (Tournament.PrizePool != null) 
                                                                { 
                                                                    prizePool = Tournament.PrizePool.Amount;
                                                                } else { 
                                                                    prizePool = "0";
                                                                }
                                                                <text>
                                                                    <h3 class="green pull-right">$@prizePool+</h3>
                                                                </text>
                                                            }
                                                        </div>
                                                        <div class="tour_filter_lower float_left">
                                                            <div class="col-sm-9 pad-zero">
                                                                <p style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                                                    @Html.Raw(Tournament.Overview)
                                                                </p>
                                                            </div>
                                                            <div class="col-sm-3 pad-zero">
                                                                <div class="tour_live_games text-right pull-right">
                                                                    <div class="btn-group" role="group">
                                                                        <button type="button" class="btn btn-default dropdown-toggle live_game_btn">
                                                                            <!--i class="fa fa-circle red"></i> LIVE GAMES <i class="fa fa-angle-down"></i-->
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        
                                    </div>
                                }
                            }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
        var tournaments = $('.element-item');

        $("#game-filter li a").click(function (event) {
            event.preventDefault();
            tournaments.show();
            var gameId = $(this).data('filter');
            ($('.tour_filter_layout').filter('[data-filter!="' + gameId + '"]')).hide();
        });

        $("#tournament-search").bind("keyup", function () {
            var search = $(this).val().toLowerCase();
            tournaments.show();
            tournaments.filter(function () {
                return ($(this).text().toLowerCase().indexOf(search) == -1);
            }).hide();
        });
</script>